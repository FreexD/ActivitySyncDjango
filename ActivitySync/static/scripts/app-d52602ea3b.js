!function(){"use strict";angular.module("playNow",["ngAnimate","restangular","ui.router","ngMaterial","toastr","facebook","ngMaterialDatePicker"])}(),function(){"use strict";function e(e,t,n,a,i){t.facebookStatus=a,t.newEvent={name:"",description:""},t.newMember={id:0},t.allTeams=[],a.logged&&e.get("/team/getAllTeams").then(function(e){t.allTeams=e.data}),t.addMember=function(n){e.defaults.headers.common.teamID=n,e.post("/team/addMember/"+n,{userId:t.newMember.id}).then(function(e){t.allTeams=e.data})},t.deleteMember=function(n,a){e.defaults.headers.common.teamID=n,e.post("/team/deleteMember/"+n,{teamMemberId:a}).then(function(e){t.allTeams=e.data})},t.candidate=function(n,a,i){e.defaults.headers.common.teamID=a,e.post("/team/manageTeamCandidate/"+n+"/"+a+"/"+i).then(function(e){t.allTeams=e.data})},t.addMessage=function(n,a){console.log(a+" "+n),""!=a&&(e.defaults.headers.common.teamID=n,e.post("/team/addMessage/"+n,{content:a,addDate:i()}).then(function(e){t.allTeams=e.data}))},t.createTeam=function(){""!=t.newEvent.name&&e.post("/team/create",{name:t.newEvent.name,about:t.newEvent.description}).then(function(e){t.allTeams=e.data,t.newEvent.name="",t.newEvent.description=""})}}e.$inject=["$http","$scope","$stateParams","facebookStatus","moment"],angular.module("playNow").controller("TeamsManagerController",e)}(),function(){"use strict";function e(e,t,n){t.facebookStatus=n,t.allTeams=[],n.logged&&e.get("/team/getAllTeams").then(function(e){t.allTeams=e.data}),t.joinTeam=function(n){e.post("/team/addTeamCandidate/"+n).then(function(e){t.allTeams=e.data})}}e.$inject=["$http","$scope","facebookStatus"],angular.module("playNow").controller("TeamsController",e)}(),function(){"use strict";function e(e,t,n,a,i){e.get("/disciplines/all").then(function(e){t.disciplines=e.data}),t.facebookStatus=a,t.events=[],t.sportEvent={disciplineID:0,players:"",since:i(),to:i().add(1,"days"),address:""},t.getEvents=function(){e.get("/events/find",{params:{disciplineID:t.sportEvent.disciplineID,since:i(t.sportEvent.since),to:i(t.sportEvent.to),address:t.sportEvent.address.toString()||null}}).then(function(e){console.log(e.data),t.events=e.data})},t.openEvent=function(e){n.go("event",{eventID:e})},t.setNow=function(){t.sportEvent.since=i()},t.setDayAgo=function(){t.sportEvent.since=i().subtract(1,"days")},t.setWeekAgo=function(){t.sportEvent.since=i().subtract(1,"weeks")},t.setDay=function(){t.sportEvent.to=i().add(1,"days")},t.setWeek=function(){t.sportEvent.to=i().add(1,"weeks")},t.setMonth=function(){t.sportEvent.to=i().add(1,"months")}}e.$inject=["$http","$scope","$state","facebookStatus","moment"],angular.module("playNow").controller("MainController",e)}(),function(){"use strict";function e(e,t,n,a,i){t.facebookStatus=a;var o=n.eventID;console.log(o),t.facebookStatus=a,t.e={},t.commentContent="",t.teams=[],t.comments=[],e.get("/events/"+o).then(function(e){console.log(e.data),t.e=e.data;var n={lat:50.061671,lng:19.942382},a=50.061671,i=19.942382;null!=t.e.coordinates&&(a=parseFloat(t.e.coordinates.split(",")[0]),i=parseFloat(t.e.coordinates.split(",")[1]));var o=new google.maps.Map(document.getElementById("google-map"),{zoom:12,center:n});new google.maps.Marker({position:{lat:a,lng:i},map:o});o.panTo({lat:a,lng:i})})}e.$inject=["$http","$scope","$stateParams","facebookStatus","$state"],angular.module("playNow").controller("EventController",e)}(),function(){"use strict";function e(e,t,n,a,i,o){function d(e,t){null!=c&&c.setMap(null),c=new google.maps.Marker({position:e,map:t})}var s=a.eventID;t.disciplines=[],e.get("/disciplines/all").then(function(e){t.disciplines=e.data}),t.sportEvent={};var l={lat:50.061671,lng:19.942382},r=new google.maps.Map(document.getElementById("google-map"),{zoom:12,center:l}),c=null;i.logged&&e.get("/events/find/"+s).then(function(e){console.log(e.data),t.sportEvent=e.data;var n=parseFloat(t.sportEvent.coordinates.split(",")[0]),a=parseFloat(t.sportEvent.coordinates.split(",")[1]);c=new google.maps.Marker({position:{lat:n,lng:a},map:r}),r.panTo({lat:n,lng:a}),r.addListener("click",function(e){d(e.latLng,r)})}),t.save=function(){e.defaults.headers.common.eventID=s,e.post("/events/updateSportsEvent/"+s,{address:t.sportEvent.address.toString()||null,disciplineID:parseInt(t.sportEvent.disciplineID),date:o(t.sportEvent.date),level:t.sportEvent.level,coordinates:c.getPosition().lat()+","+c.getPosition().lng(),numberOfFreePlaces:parseInt(t.sportEvent.numberOfPlayers),eventDescription:t.sportEvent.description.toString()||null,reserveList:t.sportEvent.reserveList}).then(function(e){n.go("event",{eventID:s})})}}e.$inject=["$http","$scope","$state","$stateParams","facebookStatus","moment"],angular.module("playNow").controller("EditEventController",e)}(),function(){"use strict";function e(e,t,n,a,i){function o(e,t){null!=c&&c.setMap(null),c=new google.maps.Marker({position:e,map:t})}if(t.facebookStatus=a,t.disciplines=[],t.sportEvent={disciplineID:"",date:new Date,address:"",lat:"",lng:"",description:"",places:10},t.create=function(){e.post("/events/create",{address:t.sportEvent.address.toString()||null,disciplineID:parseInt(t.sportEvent.disciplineID),date:i(t.sportEvent.date),lat:c.getPosition().lat(),lng:c.getPosition().lng(),places:parseInt(t.sportEvent.places),description:t.sportEvent.description.toString()||null}).then(function(e){n.go("home")})},a.logged){e.get("/disciplines/all").then(function(e){t.disciplines=e.data});var d={lat:50.061671,lng:19.942382},s=50.061671,l=19.942382,r=new google.maps.Map(document.getElementById("google-map"),{zoom:12,center:d}),c=new google.maps.Marker({position:{lat:s,lng:l},map:r});r.panTo({lat:s,lng:l}),r.addListener("click",function(e){o(e.latLng,r)})}}e.$inject=["$http","$scope","$state","facebookStatus","moment"],angular.module("playNow").controller("CreateEventController",e)}(),function(){"use strict";function e(e){return{link:function(e,t,n){t.on("click",function(e){})},controller:["$scope","$http","$state","facebookStatus",function(e,t,n,a){e.go=function(e){n.go(e)}}],template:'<div class="menu" ng-if="facebookStatus.logged"><ul><li ng-click="go(\'home\')">Events</li><li ng-click="go(\'createEvent\')">Create event</li><li ng-click="go(\'teams\')">Teams</li><li ng-click="go(\'teamsManager\')">Teams Manager</li></ul></div>'}}e.$inject=["$window"],angular.module("playNow").directive("menuBar",e)}(),function(){"use strict";function e(){this.logged=!1,this.token=null}angular.module("playNow").service("facebookStatus",e)}(),function(){"use strict";function e(e){return{link:function(e,t,n){t.on("click",function(e){})},controller:["$scope","$http","$state","Facebook","facebookStatus",function(e,t,n,a,i){e.login=function(e,n){t.post("/api-auth-token",{username:e,password:n}).then(function(e){i.token=e.token,i.logged=!0,t.defaults.headers.common.Authorization=i.token,console.log("authorized")})},e.logout=function(){t.post("/logout").then(function(e){i.token=null,i.logged=!1,t.defaults.headers.common.Authorization=null,console.log("authorized")})}}],template:'<div class="fb" ng-if="!facebookStatus.logged"><md-input-container><label>Username</label><input type="text" ng-model="username"></md-input-container><md-input-container><label>Password</label><input type="password" ng-model="password"></md-input-container><md-input-container><md-button class="btn-fb md-raised md-primary" ng-click="login(username,password)" >Login</md-button><md-button class="btn-fb md-raised md-warn" ng-click="logout()" ng-if="facebookStatus.logged">Logout</md-button></md-input-container></div><div class="fb logout" ng-if="facebookStatus.logged"><md-input-container><md-button class="btn-fb md-raised md-warn" ng-click="logout()" ng-if="facebookStatus.logged">Logout</md-button></md-input-container></div>'}}e.$inject=["$window"],angular.module("playNow").directive("facebookBtns",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("playNow").run(e)}(),function(){"use strict";function e(e,t){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).state("createEvent",{url:"/createEvent",templateUrl:"app/createEvent/createEvent.html",controller:"CreateEventController",controllerAs:"createEvent"}).state("editEvent",{url:"/editEvent/:eventID",templateUrl:"app/editEvent/editEvent.html",controller:"EditEventController",controllerAs:"editEvent"}).state("event",{url:"/event/:eventID",templateUrl:"app/event/event.html",controller:"EventController",controllerAs:"event"}).state("teams",{url:"/teams",templateUrl:"app/teams/teams.html",controller:"TeamsController",controllerAs:"teams"}).state("team",{url:"/team/:teamID",templateUrl:"app/team/team.html",controller:"TeamController",controllerAs:"team"}).state("teamsManager",{url:"/teamsManager",templateUrl:"app/teamsManager/teamsManager.html",controller:"TeamsManagerController",controllerAs:"teamsManager"}),t.otherwise("/")}e.$inject=["$stateProvider","$urlRouterProvider"],angular.module("playNow").config(e)}(),function(){"use strict";angular.module("playNow").constant("moment",moment)}(),function(){"use strict";function e(e,t,n){e.debugEnabled(!0),t.init("1107104462666270"),n.formatDate=function(e){return moment(e).format("YYYY-MM-DD")}}e.$inject=["$logProvider","FacebookProvider","$mdDateLocaleProvider"],angular.module("playNow").config(e)}(),angular.module("playNow").run(["$templateCache",function(e){e.put("app/createEvent/createEvent.html",'<div class=content><facebook-btns></facebook-btns><section class=jumbotron><h1>PlayNow!</h1></section><menu-bar></menu-bar><div class=center ng-show=facebookStatus.logged><div class=event-details><div class="event-content create-event"><h2>Create new event</h2><div class=details><table><tr><td><md-input-container><label>Discipline</label><md-select ng-model=sportEvent.disciplineID aria-label=Select><md-option ng-repeat="d in disciplines" value={{d.id}} selected>{{d.name}}</md-option></md-select></md-input-container></td></tr><tr><td><md-input-container><label>Address</label><input ng-model=sportEvent.address></md-input-container></td></tr><tr><td><md-input-container><label>Places</label><input ng-model=sportEvent.places></md-input-container></td></tr><tr><td><md-input-container><input mdc-datetime-picker="" date=true time=true type=text id=datetime3 class=datetime placeholder=Date min-date=date ng-model=sportEvent.date class=md-input></md-input-container></td></tr><tr><td><md-input-container><label>Description</label><textarea ng-model=sportEvent.description></textarea></md-input-container></td></tr></table></div><md-button class="md-raised md-warn" ng-click=create();>Create</md-button></div><div class=event-map><h2>Map</h2><div id=google-map></div></div></div></div></div>'),e.put("app/editEvent/editEvent.html",'<div class=content><facebook-btns></facebook-btns><section class=jumbotron><h1>PlayNow!</h1></section><menu-bar></menu-bar><div class=center ng-show=facebookStatus.logged><div class=event-details><div class="event-content create-event"><h2>Edit event</h2><div class=details><table><tr><td><md-input-container><label>Discipline</label><md-select ng-model=sportEvent.disciplineID aria-label=Select><md-option ng-repeat="d in disciplines" value={{d.id}} ng-selected="d.id == sportEvent.discipline.id">{{d.name}}</md-option></md-select></md-input-container></td></tr><tr><td><md-input-container><label>Address</label><input ng-model=sportEvent.address></md-input-container></td></tr><tr><td><md-input-container><label>Players</label><input ng-model=sportEvent.numberOfPlayers></md-input-container></td></tr><tr><td><md-input-container class=checkbox><md-checkbox md-no-ink ng-model=sportEvent.reserveList class=md-primary>Reserve list</md-checkbox></md-input-container></td></tr><tr><td><md-input-container><label>Level</label><md-select ng-model=sportEvent.level aria-label=Select><md-option value=easy selected>easy</md-option><md-option value=medium>medium</md-option><md-option value=hard>hard</md-option></md-select></md-input-container></td></tr><tr><td><md-input-container><input mdc-datetime-picker="" date=true time=true type=text id=datetime3 class=datetime placeholder=Date min-date=date ng-model=sportEvent.date class=md-input></md-input-container></td></tr><tr><td><md-input-container><label>Description</label><textarea ng-model=sportEvent.description></textarea></md-input-container></td></tr></table></div><md-button class="md-raised md-warn" ng-click=save()>Save</md-button></div><div class=event-map><h2>Map</h2><div id=google-map></div><!--<img src="assets/map.png" />--></div></div></div></div>'),e.put("app/event/event.html",'<div class=content><facebook-btns></facebook-btns><section class=jumbotron><h1>ActivitySync!</h1></section><menu-bar></menu-bar><!--creator--><!--firstName	"Ksiadz"--><!--lastName	"Robak"--><!--email	"MickiewiczTo@gamil.com"--><!--reliability	0--><!--discipline--><!--name	"FootBall"--><!--uniqueID	"football"--><!--id	2--><!--sportEventID	18--><!--date	1461863241195--><!--address	"tam"--><!--level	"easy"--><!--description--><!--reserveList	true--><!--numberOfPlayers	12--><!--<div class="center" ng-if="facebookStatus.logged">--><div class=center><div class=event-details><div class=event-content><h2>Event</h2><div class=details><table><tr><td><md-icon aria-label=Menu class=material-icons>label_outline</md-icon></td><td>{{ e.discipline.name }}</td></tr><tr><td><md-icon aria-label=Menu class=material-icons>room</md-icon></td><td>{{ e.location.name }}</td></tr><tr><td><md-icon aria-label=Menu class=material-icons>insert_invitation</md-icon></td><td>{{ e.date | date: \'dd-MM-yyyy\' }}</td></tr><tr><td><md-icon aria-label=Menu class=material-icons>schedule</md-icon></td><td>{{ e.date | date: \'HH:mm\' }}</td></tr><tr><td><md-icon aria-label=Menu class=material-icons>group</md-icon></td><td>{{ e.places }}</td></tr></table></div><h2>Creator</h2><div class=details><table><tr><td><md-icon aria-label=Menu class=material-icons>face</md-icon></td><td>{{ e.organizer.user.first_name }} {{ e.organizer.user.last_name }} ({{ e.organizer.creditability }})</td></tr><tr><td><md-icon aria-label=Menu class=material-icons>local_post_office</md-icon></td><td>{{ e.organizer.user.email }}</td></tr></table></div></div><div class=event-map><h2>Map</h2><div id=google-map></div></div><div class=description><h2>Description</h2><p>{{ e.description }}</p></div><!--<div class="players">--><!--<h2>Players</h2>--><!--<table>--><!--<tr ng-repeat="p in e.players">--><!--<td><md-icon aria-label="Menu" class="material-icons">perm_identity</md-icon></td>--><!--<td>{{ p.firstName }} {{ p.lastName }} ({{ p.reliability }})</td>--><!--</tr>--><!--</table>--><!--<md-button ng-if="!e.userParticipant" class="btn-join md-raised md-warn" ng-click="addMe()">--><!--Join--><!--</md-button>--><!--<md-button ng-if="e.userParticipant" class="btn-join md-raised md-warn" ng-click="removeMe()">--><!--Remove me--><!--</md-button>--><!--<md-input-container ng-show="teams.length > 0">--><!--<md-select ng-model="addTeamVal" aria-label="Select">--><!--<md-option ng-repeat="t in teams track by $index" value="{{t.teamID}}" ng-selected="$index == 0">{{t.name}}</md-option>--><!--</md-select>--><!--</md-input-container>--><!--<md-button ng-show="teams.length > 0" class="btn-join btn-join-team md-raised md-warn" ng-click="addTeam(addTeamVal)">--><!--Add team--><!--</md-button>--></div></div></div>'),e.put("app/main/main.html",'<div class=content><facebook-btns></facebook-btns><section class=jumbotron><h1>ActivitySync</h1></section><menu-bar></menu-bar><div class=left ng-if=facebookStatus.logged><!--<div class="left">--><md-input-container><label>Discipline</label><md-select ng-model=sportEvent.disciplineID aria-label=Select><md-option ng-repeat="d in disciplines" value={{d.id}} selected>{{d.name}}</md-option></md-select></md-input-container><md-input-container><input mdc-datetime-picker="" date=true time=true type=text id=datetime1 class=datetime placeholder=Since ng-model=sportEvent.since class=md-input><md-button class="date-select md-raised md-default" ng-click=setNow();>Now</md-button><md-button class="date-select md-raised md-default" ng-click=setDayAgo();>Day ago</md-button><md-button class="date-select md-raised md-default" ng-click=setWeekAgo();>Week ago</md-button></md-input-container><md-input-container><input mdc-datetime-picker="" date=true time=true type=text id=datetime2 class=datetime placeholder=To ng-model=sportEvent.to class=md-input><md-button class="date-select md-raised md-default" ng-click=setDay();>Day</md-button><md-button class="date-select md-raised md-default" ng-click=setWeek();>Week</md-button><md-button class="date-select md-raised md-default" ng-click=setMonth();>Month</md-button></md-input-container><!--<md-datepicker ng-model="sportEvent.since" md-placeholder="Since date"></md-datepicker>--><!--<md-datepicker ng-model="sportEvent.to" md-placeholder="To date"></md-datepicker>--><md-input-container><label>Address</label><input ng-model=sportEvent.address></md-input-container><md-button class="md-raised md-warn" ng-click=getEvents();>Filter</md-button></div><div class=right ng-if=facebookStatus.logged><!--<div class="right">--><div class=event ng-repeat="e in events"><div class="header header-football"><md-button class="md-raised btn-event-details" ng-click=openEvent(e.id)>Details</md-button>{{ e.discipline.name }}</div><div class=event-content><div class=details><table><tr><td><md-icon aria-label=Address class=material-icons>room</md-icon>{{ e.location.name}}</td><td><md-icon aria-label=Date class=material-icons>insert_invitation</md-icon>{{ e.date | date: \'dd-MM-yyyy\' }}</td></tr><tr><td><md-icon aria-label=Places class=material-icons>group</md-icon>{{ e.places }}</td><td><md-icon aria-label=Time class=material-icons>schedule</md-icon>{{ e.date | date: \'HH:mm\' }}</td></tr></table></div></div><div class=footer></div></div></div></div>'),e.put("app/teams/teams.html",'<div class=content><facebook-btns></facebook-btns><section class=jumbotron><h1>PlayNow!</h1></section><menu-bar></menu-bar><div class=center ng-if=facebookStatus.logged><div class=event-details><div class="event-content teams"><div class=teams-box><h2>All teams</h2><div class=team ng-repeat="t in allTeams"><p class=header>{{ t.name }}</p><p class=author>{{ t.admin.firstName }} {{ t.admin.lastName }} ({{ t.admin.reliability }})</p><p class=des>{{ t.description }}</p><md-button ng-if="!(!t.candidated && !t.teamMember)" ng-disabled=true class="md-raised md-warn btn-xs" ng-click=joinTeam(t.teamID)>{{ (t.teamMember) ? \'Member\' : \'Candidate\'}}</md-button><md-button ng-if="!t.candidated && !t.teamMember" class="md-raised md-warn btn-xs" ng-click=joinTeam(t.teamID)>Join</md-button></div></div></div></div></div></div>'),e.put("app/teamsManager/teamsManager.html",'<div class=content><facebook-btns></facebook-btns><section class=jumbotron><h1>PlayNow!</h1></section><menu-bar></menu-bar><div class=center ng-if=facebookStatus.logged><div class=event-details><div class="event-content teams"><div class=teams-box><h2>All teams</h2><!--<div class="team" ng-repeat="t in allTeams">--><div class=team ng-repeat="t in allTeams | filter:{teamMember:true}"><p class=header>{{ t.name }}</p><p class=des>{{ t.description }}</p><div class=members><h2>Players</h2><table><tr ng-repeat="p in t.teamMembers"><td><md-icon aria-label=Menu class=material-icons>perm_identity</md-icon></td><td>{{ p.userID.firstName }} {{ p.userID.lastName }} ({{ p.userID.reliability }})</td><td ng-if=t.administrator><md-button class="btn-join md-raised" ng-click=deleteMember(p.teamID.teamID,p.userID.userID)>X</md-button></td></tr></table></div><div class="candidates members" ng-if=t.administrator><h2>Candidates</h2><table><tr ng-repeat="p in t.teamCandidates"><td><md-icon aria-label=Menu class=material-icons>perm_identity</md-icon></td><td>{{ p.user.firstName }} {{ p.user.lastName }} ({{ p.user.reliability }})</td><td><md-button class="btn-join btn-candidate md-raised md-warn" ng-click=candidate(p.user.userID,p.team.teamID,true)>A</md-button><md-button class="btn-join btn-candidate md-raised md-primary" ng-click=candidate(p.user.userID,p.team.teamID,false)>R</md-button></td></tr></table></div><div class="members add-member" ng-if="t.administrator && false"><h2>Add member</h2><table><tr><td>Member ID:</td><td><md-input-container><input ng-model=newMember.id></md-input-container></td><td><md-button class="btn-join btn-candidate md-raised md-warn" ng-click=addMember(t.teamID)>Add</md-button></td></tr></table></div><div class="comments members messages"><h2>Messages</h2><div class=comment ng-repeat="c in t.messagesList"><p class=header>{{c.userID.firstName}} {{c.userID.lastName}} [{{ c.date | date: \'dd-MM-yyyy HH:mm:ss\' }}]</p><p class=comment-content>{{c.content}}</p></div></div><div class="add-comment members add-message"><h2>Add message</h2><md-input-container><textarea ng-model=messageContent></textarea></md-input-container><md-button class="btn-join md-raised md-warn" ng-click="addMessage(t.teamID,messageContent); messageContent = null">Add</md-button></div></div></div><div class=create-team><h2>Create team</h2><div class=details><table><tr><td><md-input-container><label>Name</label><input ng-model=newEvent.name></md-input-container></td></tr><tr><td><md-input-container><label>Description</label><textarea ng-model=newEvent.description></textarea></md-input-container></td></tr></table></div><md-button class="md-raised md-warn btn-xs" ng-click=createTeam()>Create</md-button></div></div></div></div></div>')}]);
//# sourceMappingURL=../../maps/static/scripts/app-d52602ea3b.js.map
